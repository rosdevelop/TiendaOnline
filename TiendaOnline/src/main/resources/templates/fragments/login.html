<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Enlaces a Bootstrap CSS y JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Enlace a tu archivo CSS -->
    <link rel="stylesheet" href="/css/estilos.css">
    <!-- Fuente Ubuntu -->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Ubuntu" />
    <title>Login Fragment</title>
</head>
<body>
    <div th:fragment="login-modal">
		<!-- Modal de Login -->
		     <div class="modal fade" id="loginModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
		         <div class="modal-dialog modal-dialog-centered">
		             <div class="modal-content">
		                 <div class="modal-header bg-secondary">
		                     <h5 class="modal-title text-center text-info fs-4" id="loginModalLabel">Iniciar Sesión</h5>
		                     <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
		                 </div>
		                 <div class="modal-body">
		                     <form th:action="@{/login}" method="post">
		                         <div class="mb-3">
		                             <label for="loginCorreo" class="form-label text-content">Correo electrónico o Teléfono</label>
		                             <input type="text" class="form-control" id="loginCorreo" name="username" placeholder="Correo electrónico o teléfono" required>
		                         </div>
		                         <div class="mb-3">
		                             <label for="loginPassword" class="form-label text-content">Contraseña</label>
		                             <input type="password" class="form-control" id="loginPassword" name="password" placeholder="Contraseña" required>
		                         </div>
		                         <button type="submit" class="btn btn-primary w-100 text-content">Iniciar sesión</button>
		                     </form>
		                     <!-- Mensaje de error si las credenciales son incorrectas -->
		                     <div th:if="${errorLogin != null}" class="alert alert-danger mt-3 text-content" role="alert" th:text="${errorLogin}"></div>
		                     <div th:if="${param.registerSuccess != null}" class="alert alert-success mt-3 w-100 text-content" role="alert">
		                         Registro exitoso. Puedes <a th:href="@{/login}">iniciar sesión</a> ahora.
		                     </div>
		                     <div class="text-center mt-3">
		                         <a href="#" class="text-decoration-none text-content" id="forgotPasswordLink">¿Has olvidado la contraseña?</a>
		                     </div>
		                 </div>
		                 <div class="modal-footer d-flex justify-content-center">
		                     <a th:href="@{/registrarse}" class="btn btn-secondary text-info text-content">Crear Cuenta</a>
		                 </div>
		             </div>
		         </div>
		     </div>
		     <!-- Modal de Recuperar Contraseña -->
		     <div class="modal fade" id="recoverPasswordModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="recoverPasswordModalLabel" aria-hidden="true">
		         <div class="modal-dialog modal-dialog-centered">
		             <div class="modal-content">
		                 <div class="modal-header bg-secondary">
		                     <h5 class="modal-title text-center text-info fs-4" id="recoverPasswordModalLabel">Recuperar Contraseña</h5>
		                     <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
		                 </div>
		                 <div class="modal-body">
		                     <form id="recoverPasswordForm">
		                         <div class="mb-3">
		                             <label for="recoverEmail" class="form-label text-content">Correo Electrónico</label>
		                             <input type="email" class="form-control" id="recoverEmail" name="email" placeholder="Ingrese su correo electrónico" required>
		                         </div>
		                         <button type="submit" class="btn btn-primary w-100 text-content">Solicitar Contraseña</button>
		                     </form>
		                     <div id="recoverAlert" class="alert mt-3 d-none w-100" role="alert"></div>
		                 </div>
		             </div>
		         </div>
		     </div>
		     <!-- Modal de Cambiar Contraseña -->
		     <div class="modal fade" id="changePasswordModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
		         <div class="modal-dialog modal-dialog-centered">
		             <div class="modal-content">
		                 <div class="modal-header bg-secondary">
		                     <h5 class="modal-title text-center text-info fs-4" id="changePasswordModalLabel">Cambiar Contraseña</h5>
		                     <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
		                 </div>
		                 <div class="modal-body">
		                     <form id="changePasswordForm">
		                         <!-- Campo oculto para el correo electrónico -->
		                         <input type="hidden" id="changeEmail" name="email" value="">
		                         <div class="mb-3">
		                             <label for="oldPassword" class="form-label text-content">Contraseña Antigua</label>
		                             <input type="password" class="form-control" id="oldPassword" name="oldPassword" placeholder="Ingrese su contraseña antigua" required>
		                         </div>
		                         <div class="mb-3">
		                             <label for="newPassword" class="form-label text-content">Nueva Contraseña</label>
		                             <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Ingrese su nueva contraseña" required>
		                         </div>
		                         <div class="mb-3">
		                             <label for="confirmPassword" class="form-label text-content">Confirmar Nueva Contraseña</label>
		                             <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirme su nueva contraseña" required>
		                         </div>
		                         <button type="submit" class="btn btn-primary w-100 text-content">Cambiar Contraseña</button>
		                     </form>
		                     <div id="changePasswordAlert" class="alert mt-3 d-none w-100" role="alert"></div>
		                 </div>
		             </div>
		         </div>
		     </div>
        <script src="/js/usuario.js"></script>
    </div>
</body>
</html>

